var UTIL=function(){let e={minMax:function(e,t,n){return Math.max(t,Math.min(n,e))},map:function(e,t,n){return e*n/t}};return e}(),ACE=function(){let e={width:null};const t="/js/slideventura.mp3";window.AudioContext||window.webkitAudioContext;let n=null,i=null,o=null,u=null,r=null,c=!1;var a=document.getElementById("text"),l=0,d=0,h=0,m=0;let s,f;return e.init=function(){s=document.querySelector("body"),f=document.querySelector("#img"),window.addEventListener("resize",(function(){ACE.getWidth()}),!0),ACE.getWidth(),s.addEventListener("mousemove",ACE.move),s.addEventListener("touchmove",ACE.move);try{n=new AudioContext,i=n.createGain(),i.gain.value=0,i.connect(n.destination)}catch(e){n=null,i=null}(function(){if(!n)return Promise.reject();if(o)return Promise.resolve(o);if(r)return r;return r=fetch(t).then((function(e){return e.arrayBuffer()})).then((function(e){return new Promise((function(t,i){n.decodeAudioData(e,t,i)}))})).then((function(e){return o=e,o})).catch((function(e){throw r=null,e})),r})().then((function(){!u&&o&&(u=n.createBufferSource(),u.buffer=o,u.loop=!0,u.connect(i))}));let e=function(){c||(c=!0,console.log("start"),a.style.display="none",n.resume().then((()=>{u.start(0)})),s.removeEventListener("click",e))};document.querySelector("#img").addEventListener("click",e),a.style.display="block",requestAnimationFrame(ACE.animation)},e.getWidth=function(){let e=document.getElementById("img").getBoundingClientRect();ACE.width=e.width},e.move=function(e){let t;if("number"!=typeof e.pageX||isNaN(e.pageX))if(e.touches&&e.touches.length){t=e.touches[e.touches.length-1].pageX}else{if(!e.changedTouches||!e.changedTouches.length)return;t=e.changedTouches[e.changedTouches.length-1].pageX}else t=e.pageX;let n=f.getBoundingClientRect().left+window.scrollX;t=UTIL.minMax(t-n,0,ACE.width),d=ACE.width-t},e.animation=function(){if(l+=(d-l)/6,m=Math.round(UTIL.map(l,ACE.width,26)),h=Math.max(m,1)*ACE.width,f.style.backgroundPositionX=h+"px",c)if(m>0&&m<=26){let e=UTIL.map(Math.min(Math.max(m-4,0),16),16,.5);i.gain.value=e}else i.gain.value=0;requestAnimationFrame(ACE.animation)},e}();ACE.init();